apply plugin: 'java'
apply plugin: 'groovy'

repositories {
  mavenCentral()
}

compileJava.options.encoding = 'UTF-8'

allprojects {
  sourceCompatibility = '1.8'
  targetCompatibility = '1.8'
}

dependencies {
  compile 'com.google.guava:guava:18.0'
  compile 'net.code-story:http:2.104'

  testCompile 'junit:junit:4.12'
  testCompile 'cglib:cglib-nodep:2.2'
  testCompile 'org.mockito:mockito-core:2.0.41-beta'
  testCompile 'org.spockframework:spock-core:1.0-groovy-2.4'
  testCompile 'net.code-story:fluent-rest-test:1.5'
}

task deps(type: Sync) {
  from configurations.compile
  into "$buildDir/deps"
}

task stage(dependsOn: ["clean", "deps", "jar"])